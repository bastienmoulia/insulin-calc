"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7178],{7178:(P,d,r)=>{r.r(d),r.d(d,{MainPageModule:()=>C});var s=r(6019),u=r(9010),o=r(2651),g=r(790),_=r(4762),n=r(865),Z=r(2798);function p(e,a){if(1&e&&(n.TgZ(0,"ion-card-header",6),n.TgZ(1,"ion-card-title"),n._uU(2),n.ALo(3,"number"),n.qZA(),n.qZA()),2&e){const t=n.oxw();n.xp6(2),n.hij("",n.xi3(3,1,t.bolus,"1.0-"+t.storage.insulinUnitsAccuracy)," unit\xe9s")}}function h(e,a){1&e&&(n.ynx(0),n._uU(1," (mg/dL)"),n.BQk())}function f(e,a){1&e&&(n.ynx(0),n._uU(1," (g/L)"),n.BQk())}function m(e,a){if(1&e&&(n.TgZ(0,"ion-card-header",10),n.TgZ(1,"ion-card-title"),n._uU(2),n.ALo(3,"number"),n.qZA(),n.qZA()),2&e){const t=n.oxw();n.xp6(2),n.hij("",n.xi3(3,1,t.correction,"1.0-"+t.storage.insulinUnitsAccuracy)," unit\xe9s")}}function M(e,a){if(1&e&&(n.TgZ(0,"ion-card"),n.TgZ(1,"ion-card-header",14),n.TgZ(2,"ion-card-title"),n._uU(3,"Total"),n.qZA(),n.TgZ(4,"ion-card-title"),n._uU(5),n.ALo(6,"number"),n.qZA(),n.qZA(),n.qZA()),2&e){const t=n.oxw();n.xp6(5),n.hij("",n.xi3(6,1,t.total,"1.0-"+t.storage.insulinUnitsAccuracy)," unit\xe9s")}}function T(e,a){if(1&e){const t=n.EpF();n.TgZ(0,"ion-item",17),n.NdJ("click",function(){const l=n.CHM(t).$implicit;return n.oxw(2).selectMeal(l)}),n.TgZ(1,"ion-label"),n._uU(2),n.qZA(),n.qZA()}if(2&e){const t=a.$implicit;n.xp6(2),n.AsE(" ",t.name," (",t.coef,")")}}function A(e,a){if(1&e){const t=n.EpF();n.TgZ(0,"ion-content"),n.TgZ(1,"ion-list"),n.YNc(2,T,3,2,"ion-item",15),n.TgZ(3,"ion-list-header"),n.TgZ(4,"ion-button",16),n.NdJ("click",function(){return n.CHM(t),n.oxw().openSettings()}),n._uU(5,"Changer les repas"),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){const t=n.oxw();n.xp6(2),n.Q6J("ngForOf",t.storage.meals)}}const q=function(){return["/settings"]},b=[{path:"",component:(()=>{class e{constructor(t,i){this.storage=t,this.router=i}ngOnInit(){}calcBolus(){this.bolus=this.coef&&this.carbohydrates?this.carbohydrates*this.coef/10:void 0,this.calcTotal()}calcCorrection(){return(0,_.mG)(this,void 0,void 0,function*(){if(this.bloodSugar&&this.storage.sensitivityIndex){this.storage.set("sensitivityIndex",this.storage.sensitivityIndex);let t=120,i=100;"gl"===this.storage.bloodGlucoseUnits&&(t/=100,i=1),this.correction=this.bloodSugar>t?(this.bloodSugar-t)/i/this.storage.sensitivityIndex:0}else this.correction=void 0;this.calcTotal()})}calcTotal(){this.bolus?(this.total=this.bolus,this.correction&&(this.total+=this.correction)):this.total=void 0}selectMeal(t){this.coef=t.coef,this.calcBolus()}openSettings(){this.router.navigate(["/settings"])}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(Z.V),n.Y36(g.F0))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-main"]],decls:44,vars:14,consts:[[3,"translucent"],["slot","primary"],["color","primary",3,"routerLink"],["slot","icon-only","name","settings-outline"],[3,"fullscreen"],["id","container"],["color","primary"],["type","number",3,"ngModel","ngModelChange"],["id","meal-button"],["color","primary",4,"ngIf"],["color","success"],[4,"ngIf"],["color","success",4,"ngIf"],["trigger","meal-button",3,"dismissOnSelect"],["color","danger"],["button","true","detail","false",3,"click",4,"ngFor","ngForOf"],[3,"click"],["button","true","detail","false",3,"click"]],template:function(t,i){1&t&&(n.TgZ(0,"ion-header",0),n.TgZ(1,"ion-toolbar"),n.TgZ(2,"ion-title"),n._uU(3,"Calculatrice d'insuline"),n.qZA(),n.TgZ(4,"ion-buttons",1),n.TgZ(5,"ion-button",2),n._UZ(6,"ion-icon",3),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(7,"ion-content",4),n.TgZ(8,"div",5),n.TgZ(9,"ion-card"),n.TgZ(10,"ion-card-header",6),n.TgZ(11,"ion-card-title"),n._uU(12,"Bolus"),n.qZA(),n.qZA(),n.TgZ(13,"ion-card-content"),n.TgZ(14,"ion-item"),n.TgZ(15,"ion-label"),n._uU(16,"Glucides (g)"),n.qZA(),n.TgZ(17,"ion-input",7),n.NdJ("ngModelChange",function(l){return i.carbohydrates=l})("ngModelChange",function(){return i.calcBolus()}),n.qZA(),n.qZA(),n.TgZ(18,"ion-item"),n.TgZ(19,"ion-label"),n._uU(20,"Coefficient"),n.qZA(),n.TgZ(21,"ion-input",7),n.NdJ("ngModelChange",function(l){return i.coef=l})("ngModelChange",function(){return i.calcBolus()}),n.qZA(),n.TgZ(22,"ion-button",8),n._uU(23,"Repas"),n.qZA(),n.qZA(),n.qZA(),n.YNc(24,p,4,4,"ion-card-header",9),n.qZA(),n.TgZ(25,"ion-card"),n.TgZ(26,"ion-card-header",10),n.TgZ(27,"ion-card-title"),n._uU(28,"Correction"),n.qZA(),n.qZA(),n.TgZ(29,"ion-card-content"),n.TgZ(30,"ion-item"),n.TgZ(31,"ion-label"),n._uU(32,"Indice de sensibilit\xe9"),n.qZA(),n.TgZ(33,"ion-input",7),n.NdJ("ngModelChange",function(l){return i.storage.sensitivityIndex=l})("ngModelChange",function(){return i.calcCorrection()}),n.qZA(),n.qZA(),n.TgZ(34,"ion-item"),n.TgZ(35,"ion-label"),n._uU(36,"Glyc\xe9mie "),n.YNc(37,h,2,0,"ng-container",11),n.YNc(38,f,2,0,"ng-container",11),n.qZA(),n.TgZ(39,"ion-input",7),n.NdJ("ngModelChange",function(l){return i.bloodSugar=l})("ngModelChange",function(){return i.calcCorrection()}),n.qZA(),n.qZA(),n.qZA(),n.YNc(40,m,4,4,"ion-card-header",12),n.qZA(),n.YNc(41,M,7,4,"ion-card",11),n.qZA(),n.qZA(),n.TgZ(42,"ion-popover",13),n.YNc(43,A,6,1,"ng-template"),n.qZA()),2&t&&(n.Q6J("translucent",!0),n.xp6(5),n.Q6J("routerLink",n.DdM(13,q)),n.xp6(2),n.Q6J("fullscreen",!0),n.xp6(10),n.Q6J("ngModel",i.carbohydrates),n.xp6(4),n.Q6J("ngModel",i.coef),n.xp6(3),n.Q6J("ngIf",i.bolus>=0),n.xp6(9),n.Q6J("ngModel",i.storage.sensitivityIndex),n.xp6(4),n.Q6J("ngIf","mgdl"===i.storage.bloodGlucoseUnits),n.xp6(1),n.Q6J("ngIf","gl"===i.storage.bloodGlucoseUnits),n.xp6(1),n.Q6J("ngModel",i.bloodSugar),n.xp6(1),n.Q6J("ngIf",i.correction>=0),n.xp6(1),n.Q6J("ngIf",i.total>=0),n.xp6(1),n.Q6J("dismissOnSelect",!0))},directives:[o.Gu,o.sr,o.wd,o.Sm,o.YG,o.YI,g.rH,o.gu,o.W2,o.PM,o.Zi,o.Dq,o.FN,o.Ie,o.Q$,o.pK,o.as,u.JJ,u.On,s.O5,o.d8,o.q_,s.sg,o.yh],pipes:[s.JJ],styles:[".card-content-md[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3em}"]}),e})()}];let x=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[g.Bz.forChild(b)],g.Bz]}),e})(),C=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[s.ez,u.u5,o.Pc,x]]}),e})()}}]);